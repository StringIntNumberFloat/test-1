<html>
<head>
	<link rel="stylesheet" href="hui2.css" type="text/css">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>Фигуры Лиссажу</title>
	<script type="text/javascript" src="https://yandex.st/jquery/1.8.2/jquery.min.js"></script>
	
	<style type="text/css">
		* {padding: 0; margin: 0; font-size: 13px;}
		canvas { border: 1px solid gray; }
		p {display: inline-block; margin-top: 12px;}
	</style>
</head>
	
<body>

<table style="width: 100%;">
<tr>
	<td style="width: 200px; vertical-align: top; padding: 10px;">
		<p style="font-weight: bold;">Изучение фигур Лиссажу</p>

		<p>
			коэфф. Х:
			<br />
			<input type="text" name="koeff_x" id="koeff_x" value="1">
		</p>

		<p>
			коэфф. Y:
			<br />
			<input type="text" name="koeff_y" id="koeff_y" value="1">
		</p>

        <p>
			скорость обновления фазы:
			<br />
			<input type="text" name="phase_update" id="phase_update" value="5">
		</p>

        <p>
			скорость обновления угла:
			<br />
			<input type="text" name="angle_update" id="angle_update" value="1">
		</p>

        <p>
			масштаб:
			<br />
			<input type="text" name="size" id="size" value="250">
		</p>

		<p>
			<input type="checkbox" name="phase_change" id="phase_change">
			<label for="phase_change">сдвиг фазы</label>
		</p>
		<p>
			<input type="button" value="Обновить анимацию" onClick="update_animation();">
		</p>
	</td>
	<td>
		<canvas id="spiral" width="600" height="600"></canvas>
	</td>
</tr>
</table>

<script>

const update_rate = 100;

var phase = 0;
var phase_change = false;
var koeff_x = 1;
var koeff_y = 1;
var phase_update = 5; //переименовать в html
var angle_update = 1; //переименовать в html

var center_x = 300;
var center_y = 300;
var size = 250;

function update_animation() {
	var input_x = $("#koeff_x").val();
	if ('' != input_x && !isNaN(input_x)) koeff_x = input_x;
	
	var input_y = $("#koeff_y").val();
	if ('' != input_y && !isNaN(input_y)) koeff_y = input_y;

    var input_phaseupdate = $("#phase_update").val();
	if ('' != input_phaseupdate && !isNaN(input_phaseupdate)) phase_update = input_phaseupdate;

    var input_angleupdate = $("#angle_update").val();
	if ('' != input_angleupdate && !isNaN(input_angleupdate)) angle_update = input_angleupdate;
	
    var input_size = $("#size").val();
	if ('' != input_size && !isNaN(input_size)) size = input_size;
	

	if ($("#phase_change").prop('checked')) {
		phase_change = true;
	} else {
		phase_change = false;
	}
}

function draw() {
	// поле для рисования
	var canvas = document.getElementById('spiral');
	if (canvas.getContext) {
		var ctx = canvas.getContext('2d');
	}
	
	ctx.clearRect(0, 0, 600, 600);
    
	for (angle = 0; angle < 50; angle = angle + angle_update/1000) {
		// вычисляем координаты
		x = center_x + size*Math.cos(koeff_x*angle);
		y = center_y + size*Math.cos(koeff_y*angle + phase);
	
		// рисуем точку
		ctx.fillRect(x, y, 3, 3);
	}
	
	if (phase_change) {
		phase = phase + phase_update/100;
	}
}

setInterval("draw()", update_rate);

/*		body {
		background: url("https://i.ibb.co/F4T05y8/image.jpg");
		width:100%;
		margin-left: auto;
		}*/

</script>

</body>
</html>
